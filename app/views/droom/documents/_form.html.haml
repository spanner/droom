= form_for [@folder, @document], :html => { :multipart => true, :class => 'edit document', :remote => true, :data => {:type => :html}, onsubmit: 'DocumentEditorForm(event)'} do |f|
  = hidden_field_tag :authenticity_token, form_authenticity_token
  = hidden_field_tag :document_id, @document.id
  %p.slug
    = @folder.path + "/"

  .filepicker{:data => {:role => "filepicker"}}
    = link_to "choose file", "#", :class => "ul minimal #{@document.file_extension}", :data => {:action => "pick"}
    = f.file_field :file, :class => "file"
    %p.tip
      = t :click_to_choose_file

  .non-file-data
    %p.error{style: 'color: red'}
    %p.name
      = f.text_field :name, :class => 'name', :placeholder => t(:"helpers.label.document.name"), :autofocus => true, :readonly => "#{@document.id ? true : false}", :style => "#{@document.id ? 'background-color: #eee' : ""}"
    %p.description
      = f.text_area :description, :class => 'description', :placeholder => t(:"helpers.label.document.description")

    .buttons
      = f.submit t(:save_document)
      = t :or
      = link_to t(:cancel), "/", :class => 'cancel'
